<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Valentine</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

* { box-sizing: border-box; font-family: 'Inter', system-ui, sans-serif; }
body {
  margin:0; height:100vh;
  display:flex; align-items:center; justify-content:center;
  background:#1E1E2F;
  transition: background 1s ease;
  overflow:hidden; color:#F4D3D0;
}

.card {
  width:92%; max-width:420px; height:90vh;
  background: rgba(30,30,47,0.95);
  border-radius:24px; padding:28px;
  display:flex; flex-direction:column; justify-content:space-between;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
  transition: box-shadow 1s ease, background 1s ease, transform 0.5s ease;
  position:relative; overflow:hidden;
}

.content { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; gap:20px; opacity:0; transition: opacity 0.8s ease; }
.content.show { opacity:1; }
.text { font-size:1.5rem; font-weight:500; line-height:1.5; }

input {
  width:100%; padding:14px 16px; border-radius:16px; border:none; font-size:1rem; outline:none;
  background: rgba(244,211,208,0.1); color:#F4D3D0; text-align:center; transition: background 0.3s, box-shadow 0.3s;
}
input::placeholder { color: rgba(244,211,208,0.6); }
input:focus { background: rgba(244,211,208,0.2); box-shadow: 0 0 12px rgba(255,203,164,0.4); }

.button-container { display:flex; justify-content:center; padding-top:16px; }
button {
  background: linear-gradient(135deg, #7B2A3B, #FFCBA4); border:none; border-radius:999px;
  padding:14px 28px; font-size:1rem; font-weight:600; color:#1E1E2F; cursor:pointer;
  transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 15px rgba(255,203,164,0.4);
}
button:disabled { opacity:0.5; cursor:not-allowed; box-shadow:none; }
button:active { transform:scale(0.96); box-shadow:0 2px 8px rgba(255,203,164,0.4); }

.hearts { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; overflow:hidden; z-index:0; }

.heart {
  position:absolute; width:10px; height:10px; background: rgba(255,203,164,0.6);
  transform: rotate(45deg); border-radius:2px 2px 0 0;
  animation: float 4s linear infinite;
}
.heart:after,.heart:before { content:""; position:absolute; width:10px;height:10px; background: rgba(255,203,164,0.6); border-radius:50%; }
.heart:before { top:-5px; left:0; } .heart:after { top:0; left:-5px; }
@keyframes float { 0%{transform:translateY(100%) rotate(45deg) scale(0.5);opacity:0;} 50%{opacity:1;} 100%{transform:translateY(-120%) rotate(45deg) scale(1);opacity:0;} }

.warning { color:#FFCBA4; font-weight:600; margin-top:10px; font-size:1rem; opacity:0; transition:opacity 0.5s; }
.warning.show { opacity:1; }

.confetti {
  position:absolute; width:12px; height:12px; background: #FFCBA4; top:0; left:50%;
  opacity:1; transform: rotate(0deg) translateY(0) rotate(0deg);
  border-radius:3px; animation: confetti-fall 2s forwards;
}
@keyframes confetti-fall {
  0%{opacity:1; transform:translateY(0) rotate(0deg);}
  100%{opacity:800px translateX(calc(-50% + var(--x))) rotate(720deg); opacity:0;}
}
</style>
</head>
<body>

<div class="card">
  <div class="hearts" id="heartsContainer"></div>
  <div id="content" class="content">
    <div id="text" class="text"></div>
    <input id="answerInput" type="text" placeholder="Type your answer..." />
    <div id="warning" class="warning"></div>
  </div>
  <div class="button-container">
    <button id="nextBtn" disabled>Next</button>
  </div>
</div>

<script>
const themes = [
  { background:'#1E1E2F', cardShadow:'0 10px 40px rgba(0,0,0,0.3)', hearts:0 },
  { background:'linear-gradient(135deg, #2B1E2F, #5C1A3B)', cardShadow:'0 10px 50px rgba(123,42,59,0.6)', hearts:15 },
  { background:'linear-gradient(135deg, #5C1A3B, #F4C3B8)', cardShadow:'0 10px 60px rgba(255,203,164,0.5)', hearts:30 },
  { background:'linear-gradient(135deg, #7B2A3B, #FFCBA4)', cardShadow:'0 10px 80px rgba(255,203,164,0.7)', hearts:50 }
];

const questions = [
  { q:"Question 1: Enter the secret code", type:"text" },
  { q:"Question 2: Enter the special word", type:"text" },
  { q:"Question 3: Choose a special date", type:"date" }
];

const messages = ["Thanks for participating â¤ï¸","Almost there...","You did it! ðŸŽ‰"];

let index=0, phase="questions", themeLevel=0;
const contentEl=document.getElementById("content");
const textEl=document.getElementById("text");
const inputEl=document.getElementById("answerInput");
const nextBtn=document.getElementById("nextBtn");
const heartsContainer=document.getElementById("heartsContainer");
const bodyEl=document.body;
const cardEl=document.querySelector(".card");
const warningEl=document.getElementById("warning");

function show(text,inputType="text"){
  contentEl.classList.remove("show");
  setTimeout(()=>{
    textEl.textContent=text;
    if(inputType){ inputEl.style.display="block"; inputEl.type=inputType; inputEl.value=""; nextBtn.disabled=true; inputEl.focus(); }
    else { inputEl.style.display="none"; nextBtn.disabled=false; }
    contentEl.classList.add("show");
  },400);
}

inputEl.addEventListener("input",()=>{ nextBtn.disabled=inputEl.value.trim()===""; warningEl.classList.remove("show"); });

// ENTER key triggers next
inputEl.addEventListener("keydown",(e)=>{
  if(e.key==="Enter" && !nextBtn.disabled){ nextBtn.click(); }
});

function applyTheme(level){
  const t=themes[level];
  bodyEl.style.background=t.background;
  cardEl.style.boxShadow=t.cardShadow;
  createHearts(t.hearts);
}

function createHearts(count){
  heartsContainer.innerHTML="";
  for(let i=0;i<count;i++){
    const heart=document.createElement("div");
    heart.className="heart";
    heart.style.left=Math.random()*100+"%";
    heart.style.animationDuration=(3+Math.random()*3)+"s";
    heart.style.width=heart.style.height=(8 + Math.random()*8)+"px";
    heartsContainer.appendChild(heart);
  }
}

function celebrate(){
  for(let i=0;i<50;i++){
    const confetti=document.createElement("div");
    confetti.className="confetti";
    confetti.style.setProperty("--x",(Math.random()*200-100)+"px");
    confetti.style.left=Math.random()*100+"%";
    confetti.style.background=["#FFCBA4","#F4C3B8","#7B2A3B","#FF6B6B"][Math.floor(Math.random()*4)];
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2000);
  }
  cardEl.style.transform="scale(1.05)";
  setTimeout(()=>{cardEl.style.transform="scale(1)";},500);
}

nextBtn.addEventListener("click",()=>{
  if(phase==="questions"){
    const answer=inputEl.value.trim();

    // âœ… Placeholder: assume correct answer
    const correct=true;

    if(correct){
      themeLevel=Math.min(themeLevel+1,themes.length-1);
      applyTheme(themeLevel);

      if(themeLevel===themes.length-1){ celebrate(); }
    } else {
      applyTheme(0);
      warningEl.textContent="Incorrect, try again!";
      warningEl.classList.add("show");
      return;
    }

    index++;
    if(index<questions.length){ show(questions[index].q,questions[index].type||"text"); }
    else { phase="messages"; index=0; show(messages[index],null); }

  } else {
    index++;
    if(index<messages.length){ show(messages[index],null); }
    else{ nextBtn.style.display="none"; }
  }
});

// initial render
show(questions[0].q,questions[0].type||"text");
applyTheme(0);
</script>

</body>
</html>
